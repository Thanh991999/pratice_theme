if("undefined"==typeof SHTDialogCore){class SHTDialogCore extends HTMLElement{constructor(){super(),this.dialog=this.querySelector(".dialog"),this.closeBtn=this.querySelectorAll(".js-dialog-close-btn"),this.body=this.querySelector(".js-dialog-body"),this.closeModalOnOverlayClick=this.dataset.closeModalOnOverlay||"true",this.opener=null,this.bodyElement=document.body,this.bindEventHandlers()}bindEventHandlers(){this.closeBtn.forEach(e=>{e.addEventListener("click",e=>{this.closeModal()})}),this.addEventListener("click",e=>{e.target.nodeName===this.tagName&&"true"===this.closeModalOnOverlayClick&&this.closeModal()}),this.addEventListener("keyup",e=>"ESCAPE"===e.code.toUpperCase()&&this.closeModal()),this.dialogAttrObserve()}dialogAttrObserve(){new MutationObserver((e,t)=>{e.forEach(async e=>{"hidden"==e.attributeName&&(!this.hasAttribute("hidden")?(this.dispatchEvent(new CustomEvent("opening",{detail:{opener:this.opener,dialog:this}})),await this.animationsComplete(),this.dispatchEvent(new CustomEvent("opened",{detail:{opener:this.opener,dialog:this}})),SHThemeHelper.trapFocus(this),this.bodyElement.classList.add("o-hidden")):(SHThemeHelper.removeTrapFocus(this.opener),this.dispatchEvent(new CustomEvent("closing",{detail:{opener:this.opener,dialog:this}})),await this.animationsComplete(),this.dispatchEvent(new CustomEvent("closed",{detail:{opener:this.opener,dialog:this}})),this.bodyElement.classList.remove("o-hidden")))})}).observe(this,{attributes:!0})}animationsComplete(){return Promise.allSettled(this.dialog.getAnimations({subtree:!0}).map(e=>e.finished))}processBodyContent(){var e;this.template=this.querySelector("template"),this.template&&(e=this.template.content,this.body.appendChild(e))}showModal(e,t=!1){t&&this.processBodyContent(),this.opener=e,this.toggleAttribute("hidden",!1)}closeModal(){this.setAttribute("hidden",!0)}}if(!customElements.get("sht-dialog")){class n extends SHTDialogCore{constructor(){super()}}customElements.define("sht-dialog",n)}if(!customElements.get("sht-dialog-quickshop")){class o extends SHTDialogCore{constructor(){super()}showModal(e){this.opener=e,this.opener?.setAttribute("disabled","disabled"),this.processData(e)}processData(e){this.productElement=null,fetch(e.getAttribute("data-product-url")).then(e=>e.text()).then(e=>{e=(new DOMParser).parseFromString(e,"text/html");this.productElement=e.querySelector(".section-product-quick-view"),window.Shopify&&Shopify.PaymentButton&&Shopify.PaymentButton.init(),this.body.innerHTML=this.productElement.innerHTML,this.executeScriptElements(this.body)}).finally(()=>{this.toggleAttribute("hidden",!1),this.opener?.removeAttribute("disabled")})}closeModal(){this.setAttribute("hidden",!0),this.body.innerHTML=""}executeScriptElements(e){e=e.querySelectorAll("script");Array.from(e).forEach(e=>{const t=document.createElement("script");Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)}),t.appendChild(document.createTextNode(e.innerHTML)),e.parentNode.replaceChild(t,e)})}}customElements.define("sht-dialog-quickshop",o)}}