if(!customElements.get("sht-popup")){class a extends HTMLElement{constructor(){super(),this.properties=JSON.parse(this.dataset.props),this.myStorage=window.sessionStorage,this.sessionStorageName=Shopify.theme.name.toLowerCase()+"-popup-display",this.cartNotification=document.querySelector("sht-cart-notification-panel"),this.headerLogoLink=document.querySelector(".js-header-logo-link"),this.isOpen=!1,this.buffer=100,this.myScrollHeight=document.body.scrollHeight||document.documentElement.scrollHeight||0,this.myWindowHeight=window.innerHeight||document.documentElement.clientHeight||0,this.elms={close_btn:this.querySelector(".js-popup-close-button"),body:document.querySelector("body")},this.triggerOn=this.properties.triggerOn,this.scrollEventHandle=this.onScrollEventHandle.bind(this),this.onLoadUserAction=this.onUserAction.bind(this),this.bindEventHandlers()}bindEventHandlers(){this.elms.close_btn.addEventListener("click",this.onCloseBtnClickHandle.bind(this)),window.addEventListener("scroll",this.scrollEventHandle),this.cartNotification&&"after-closing-cart-notification"===this.triggerOn&&this.cartNotification.addEventListener("closed",t=>{this.getPopupStatus()||this.togglePopup(!0)}),["mouseover"].forEach(function(t){document.querySelector("body").addEventListener(t,this.onLoadUserAction)}.bind(this)),this.popupAttrObserve()}onUserAction(t){this.classList.contains("d-none")&&this.classList.remove("d-none"),t.currentTarget.removeEventListener(t.type,this.onLoadUserAction)}onScrollEventHandle(t){var e,o;"reaching-to-footer"!==this.triggerOn?window.removeEventListener("scroll",this.scrollEventHandle):(this.myScrollHeight=document.body.scrollHeight||document.documentElement.scrollHeight||0,e=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)+this.buffer+this.myWindowHeight>=this.myScrollHeight,o=this.getPopupStatus(),"reaching-to-footer"!==this.triggerOn||!e||null!==this.getAttribute("open")&&""!==this.getAttribute("open")||o||this.togglePopup(!0))}togglePopup(t){t?this.toggleOpen(!0):(this.toggleOpen(!1),this.setPopupStatus())}toggleOpen(t){t?(this.elms.body.classList.add("is-popup-show"),this.setAttribute("open",!0)):(this.elms.body.classList.remove("is-popup-show"),this.removeAttribute("open"),SHThemeHelper.removeTrapFocus())}onCloseBtnClickHandle(t){t.preventDefault(),this.togglePopup(!1)}setPopupStatus(){this.myStorage.setItem(this.sessionStorageName,!1)}getPopupStatus(){return Shopify.designMode?"":this.myStorage.getItem(this.sessionStorageName)}popupAttrObserve(){new MutationObserver((t,e)=>{t.forEach(async t=>{"open"==t.attributeName&&(this.hasAttribute("open")?(await this.animationsComplete(),this.dispatchEvent(new Event("opened")),SHThemeHelper.trapFocus(this)):(this.headerLogoLink?SHThemeHelper.removeTrapFocus(this.headerLogoLink):SHThemeHelper.removeTrapFocus(),await this.animationsComplete(),this.dispatchEvent(new Event("closed"))))})}).observe(this,{attributes:!0})}animationsComplete(){return Promise.allSettled(this.getAnimations().map(t=>t.finished))}}customElements.define("sht-popup",a)}