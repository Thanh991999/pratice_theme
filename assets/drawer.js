class SHTCoreDrawer extends HTMLElement{constructor(){super(),this.drawerWrapperElement=this.querySelector(".js-drawer-wrapper"),this.drawerOverlayElement=this.querySelector(".js-drawer-overlay"),this.closeBtnElement=this.querySelector(".js-drawer-btn-close"),this.opener=null,this.bodyElement=document.body,this.bindEventHandlers()}bindEventHandlers(){this.drawerOverlayElement.addEventListener("click",this.closeDrawer.bind(this)),this.closeBtnElement.addEventListener("click",this.closeDrawer.bind(this)),window.addEventListener("load",()=>{this.removeAttribute("hidden")}),this.addEventListener("keyup",e=>"ESCAPE"===e.code.toUpperCase()&&this.closeDrawer()),this.drawerAttrObserve()}drawerAttrObserve(){new MutationObserver((e,t)=>{e.forEach(async e=>{"open"==e.attributeName&&(this.hasAttribute("open")?(this.opener?.removeAttribute("disabled"),this.opener?.setAttribute("aria-expanded","true"),this.setAttribute("aria-hidden","false"),this.dispatchEvent(new Event("opening")),this.bodyElement.classList.add("o-hidden"),this.classList.add("active"),await this.animationsComplete(),this.dispatchEvent(new Event("opened")),SHThemeHelper.trapFocus(this)):(SHThemeHelper.removeTrapFocus(this.opener),this.setAttribute("aria-hidden","true"),this.opener?.setAttribute("aria-expanded","false"),this.opener?.removeAttribute("disabled"),this.dispatchEvent(new Event("closing")),this.bodyElement.classList.remove("o-hidden"),this.classList.remove("active"),await this.animationsComplete(),this.dispatchEvent(new Event("closed"))))})}).observe(this,{attributes:!0})}animationsComplete(){return Promise.allSettled(this.drawerWrapperElement.getAnimations().map(e=>e.finished))}openDrawer(e){this.opener=e,this.removeAttribute("hidden"),this.toggleAttribute("open",!0)}closeDrawer(){this.toggleAttribute("open",!1)}}if(!customElements.get("sht-drawer")){class i extends SHTCoreDrawer{}customElements.define("sht-drawer",i)}if(!customElements.get("sht-drawer-trigger")){class j extends HTMLElement{constructor(){super(),this.triggerBtnElement=this.querySelector(".js-drawer-trigger"),this.drawerElement=document.querySelector("sht-drawer#"+this.dataset.drawerId),this.triggerBtnElement&&this.drawerElement&&(this.mediaElement=this.querySelector(".js-drawer-trigger-media"),this.headingElement=this.querySelector(".js-drawer-trigger-heading"),this.contentElements=this.querySelectorAll(".js-drawer-trigger-content"),this.footerElement=this.querySelector(".js-drawer-trigger-footer"),this.bindEventHandlers())}bindDataToDrawer(){let t="";this.drawerElement.querySelector(".js-drawer-media").innerHTML=this.mediaElement.innerHTML,this.drawerElement.querySelector(".js-drawer-heading").innerHTML=this.headingElement.innerHTML,this.drawerElement.querySelector(".js-drawer-wrapper").setAttribute("aria-label",this.headingElement.innerHTML),this.contentElements.forEach(e=>{t+=e.innerHTML}),this.drawerElement.querySelector(".js-drawer-content").innerHTML=t,this.footerElement&&(this.drawerElement.querySelector(".js-drawer-footer").innerHTML=this.footerElement.innerHTML,this.drawerElement.querySelector(".js-drawer-footer").querySelectorAll(".js-drawer-trigger-footer-button").forEach(e=>{e.classList.add("button--drawer")}))}bindEventHandlers(){this.triggerBtnElement.addEventListener("click",e=>{setTimeout(()=>{this.bindDataToDrawer(),this.drawerElement.openDrawer(e.target)},100)})}}customElements.define("sht-drawer-trigger",j)}if(!customElements.get("sht-product-drawer")){class p extends SHTCoreDrawer{openProductDrawer(e){this.opener=e,this.opener?.setAttribute("disabled","disabled"),this.productElement=null,this.drawerBodyElement=this.querySelector(".js-product-drawer-body"),fetch(e.getAttribute("data-product-url")).then(e=>e.text()).then(e=>{e=(new DOMParser).parseFromString(e,"text/html");this.productElement=e.querySelector(".section-product-quick-view"),window.Shopify&&Shopify.PaymentButton&&Shopify.PaymentButton.init(),this.drawerBodyElement.innerHTML=this.productElement.innerHTML,this.executeScriptElements(this.drawerBodyElement),this.toggleAttribute("open",!0)}).finally(()=>{})}executeScriptElements(e){e=e.querySelectorAll("script");Array.from(e).forEach(e=>{const t=document.createElement("script");Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)}),t.appendChild(document.createTextNode(e.innerHTML)),e.parentNode.replaceChild(t,e)})}}customElements.define("sht-product-drawer",p)}if(!customElements.get("sht-product-drawer-opener")){class z extends HTMLElement{constructor(){super(),this.triggerBtnElement=this.querySelector(".js-product-drawer-trigger"),this.productDrawerElement=document.querySelector("sht-product-drawer"),this.bindEventHandlers()}bindEventHandlers(){this.triggerBtnElement.addEventListener("click",e=>{this.productDrawerElement.openProductDrawer(e.currentTarget)})}}customElements.define("sht-product-drawer-opener",z)}if(!customElements.get("sht-cart-drawer")){class B extends SHTCoreDrawer{openCartDrawer(e){this.opener=e,this.toggleAttribute("open",!0)}getSectionsToRender(){return[{id:"cart-drawer",section:"cart-drawer",space_selector:"#cartDrawer"}]}}customElements.define("sht-cart-drawer",B)}if(!customElements.get("sht-cart-drawer-cart-note")){class D extends HTMLElement{constructor(){super(),this.bindEventHandlers()}bindEventHandlers(){this.addEventListener("change",SHThemeHelper.debounce(e=>{e=JSON.stringify({note:e.target.value});fetch(""+window.routes.cart_update_url,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:e})},300))}}customElements.define("sht-cart-drawer-cart-note",D)}if(!customElements.get("sht-cart-drawer-quantity-input")){class G extends HTMLElement{constructor(){super(),this.input=this.querySelector(".js-cart-drawer-quantity-input"),this.changeEvent=new Event("change",{bubbles:!0}),this.button=this.querySelectorAll(".js-cart-drawer-quantity-button"),this.button.forEach(e=>e.addEventListener("click",this.onButtonClickHandler.bind(this)))}onButtonClickHandler(e){e.preventDefault();var t=this.input.value;"plus"===e.currentTarget.dataset.name?this.input.stepUp():this.input.stepDown(),t!==this.input.value&&this.input.dispatchEvent(this.changeEvent)}}customElements.define("sht-cart-drawer-quantity-input",G)}if(!customElements.get("sht-cart-drawer-remove-button")){class K extends HTMLElement{constructor(){super(),this.addEventListener("click",e=>{e.preventDefault(),this.closest("sht-cart-drawer-form").updateQuantity(this.dataset.index,0)})}}customElements.define("sht-cart-drawer-remove-button",K)}if(!customElements.get("sht-cart-drawer-form")){class M extends HTMLElement{constructor(){super(),this.totalItems=Array.from(this.querySelectorAll(".js-cart-drawer-quantity-input")).reduce((e,t)=>e+parseInt(t.value),0),this.drawerCartElement=document.querySelector("sht-cart-drawer"),this.wrapperElement=this.drawerCartElement.querySelector(".js-cart-drawer-wrapper"),this.cartNotification=document.querySelector("sht-cart-notification-panel"),this.bindEventHandlers()}bindEventHandlers(){this.addEventListener("change",SHThemeHelper.debounce(e=>{this.onChange(e)},300))}onChange(e){this.updateQuantity(e.target.dataset.index,e.target.value,document.activeElement.dataset.name)}renderContents(n){this.wrapperElement.classList.contains("is-empty")&&this.wrapperElement.classList.remove("is-empty"),this.getSectionsToRender().forEach(r=>{r.selectors?.forEach(e=>{var t=document.getElementById(r.id);t&&n.sections[r.section]&&((t.querySelector(e)||t).innerHTML=this.getSectionInnerHTML(n.sections[r.section],e))})})}getSectionsToRender(){return[{id:"cartDrawer",section:"cart-drawer",selectors:[".js-cart-drawer-wrapper"]},{id:"mainCart",section:"main-cart",selectors:["#mainCartContainer"]}]}updateQuantity(t,e,r){let n=this.getSectionsToRender(),s={};this.cartNotification&&(n=[...n,...this.cartNotification.getSectionsToRender()]);e=JSON.stringify({line:t,quantity:e,sections:n.map(e=>e.section),sections_url:window.location.pathname});this.updateButtonState(!0),fetch(""+window.routes.cart_change_url,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:e}).then(e=>e.text()).then(e=>{s=JSON.parse(e),this.closest(".js-cart-drawer-wrapper").classList.toggle("is-empty",0===s.item_count),this.getSectionsToRender().forEach(r=>{r.selectors.forEach(e=>{var t=document.getElementById(r.id);t&&((t.querySelector(e)||t).innerHTML=this.getSectionInnerHTML(s.sections[r.section],e))})});var e=document.getElementById("cartDrawerItem-"+t);e&&(e=e.querySelector(".js-cart-drawer-quantity-button--"+r))&&e.focus(),this.cartNotification&&this.cartNotification.getSectionsToRender().forEach(e=>{"header-cart-status"==e.id&&((new DOMParser).parseFromString(s.sections[e.id],"text/html"),document.querySelector(e.space_selector).innerHTML=this.cartNotification.getSectionInnerHTML(s.sections[e.id],e.selector))})}).catch(e=>{this.querySelector(".js-cart-drawer-errors").textContent=SHThemeLanguage.cart.ERROR,console.log(e.message,e.stack)}).finally(()=>{this.updateButtonState(!1),setTimeout(()=>{this.updateErrorRegions(t,s.item_count)},100)})}updateErrorRegions(e,t){var r;this.totalItems===t&&((r=document.querySelector("#cart-drawer-line-item-error-"+e)).querySelector(".js-cart-drawer-form-item-error-message").innerHTML=SHThemeLanguage.cart.QUANTITY_ERROR.replace("[quantity]",document.querySelector("#cartDrawerQuantityField-"+e).value),r.classList.remove("d-none-important")),this.totalItems=t}getSectionInnerHTML(e,t){return(new DOMParser).parseFromString(e,"text/html").querySelector(t).innerHTML}updateButtonState(e){var t=this.querySelectorAll(".js-cart-drawer-button"),r=this.drawerCartElement.querySelector(".js-cart-drawer-submit-button");e?(t.forEach(e=>e.setAttribute("disabled","disabled")),r&&r.setAttribute("disabled","disabled")):(t.forEach(e=>e.removeAttribute("disabled")),r&&r.removeAttribute("disabled"))}}customElements.define("sht-cart-drawer-form",M)}if(!customElements.get("sht-main-search-drawer")){class wa extends SHTCoreDrawer{clearFormFilters(e){e.preventDefault(),document.querySelector("sht-main-search-filter-form").onActiveFilterClick(e)}}customElements.define("sht-main-search-drawer",wa)}if(!customElements.get("sht-main-search-drawer-opener")){class za extends HTMLElement{constructor(){super(),this.triggerBtnElement=this.querySelector(".js-main-search-drawer-trigger"),this.mainSearchDrawerElement=document.querySelector("sht-main-search-drawer"),this.bindEventHandlers()}bindEventHandlers(){this.triggerBtnElement.addEventListener("click",e=>{this.mainSearchDrawerElement.openDrawer(e.target)})}}customElements.define("sht-main-search-drawer-opener",za)}if(!customElements.get("sht-menu-drawer")){class Ba extends SHTCoreDrawer{}customElements.define("sht-menu-drawer",Ba)}if(!customElements.get("sht-menu-drawer-opener")){class Ca extends HTMLElement{constructor(){super(),this.triggerBtnElement=this.querySelector(".js-menu-drawer-trigger"),this.menuDrawerElement=document.querySelector("sht-menu-drawer"),this.menuDrawerBodyElement=this.menuDrawerElement.querySelector(".js-menu-drawer-body"),this.menuDrawerContentElement=document.querySelector(".js-menu-drawer-content"),this.bindEventHandlers()}bindEventHandlers(){this.triggerBtnElement.addEventListener("click",e=>{this.menuDrawerBodyElement.innerHTML=this.menuDrawerContentElement.innerHTML,setTimeout(()=>{this.menuDrawerElement.openDrawer(e.target)},0)})}}customElements.define("sht-menu-drawer-opener",Ca)}if(!customElements.get("sht-collection-product-drawer")){class Ea extends SHTCoreDrawer{clearFormFilters(e){e.preventDefault(),document.querySelector("sht-main-collection-product-filter-form").onActiveFilterClick(e)}}customElements.define("sht-collection-product-drawer",Ea)}if(!customElements.get("sht-collection-product-drawer-opener")){class Ha extends HTMLElement{constructor(){super(),this.triggerBtnElement=this.querySelector(".js-collection-product-drawer-trigger"),this.collectionProductDrawerElement=document.querySelector("sht-collection-product-drawer"),this.bindEventHandlers()}bindEventHandlers(){this.triggerBtnElement.addEventListener("click",e=>{this.collectionProductDrawerElement.openDrawer(e.target)})}}customElements.define("sht-collection-product-drawer-opener",Ha)}